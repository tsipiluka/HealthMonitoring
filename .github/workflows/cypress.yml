name: E2E on Chrome
on: [push]
jobs:
  cypress-run:
    runs-on: ubuntu-20.04
    # let's make sure our tests pass on Chrome browser
    name: E2E on Chrome
    steps:
      - uses: actions/checkout@v2
        with:
          ref: ${{ github.head_ref }}
      # - name: Start app with docker-compose
      #   uses: sudo-bot/action-docker-compose@latest
      #   with:
      #     # https://docs.docker.com/compose/reference/overview/
      #     cli-args: "up"
      - uses: bahmutov/npm-install@v1
        with:
          working-directory: frontend/healthmonitoring
          install-command: npm i --force
      - uses: cypress-io/github-action@v4 
        with:
          install: false
          # wait-on: 'http://127.0.0.1:4200 , http://127.0.0.1:8000'
          browser: chrome
          working-directory: frontend/healthmonitoring
          # project: frontend/healthmonitoring/
          config-file: cypress.config.ts
        env: 
          CYPRESS_host: "frontend"
          CYPRESS_port: 4200
